<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buncha Pricing Model - Meijer Partnership</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .subtitle {
            color: #666;
            font-size: 18px;
        }
        .controls {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .control-item {
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }
        input[type="number"], input[type="range"] {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .slider-value {
            text-align: right;
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .card h2 {
            margin-top: 0;
            color: #333;
            font-size: 20px;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .metric-label {
            color: #666;
        }
        .metric-value {
            font-weight: 600;
            color: #333;
        }
        .option-1 { color: #2563eb; }
        .option-2 { color: #059669; }
        .option-3 { color: #dc2626; }
        .current { color: #6b7280; }
        .savings { color: #059669; }
        .cost { color: #dc2626; }
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        canvas {
            max-height: 400px;
        }
        .table-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }
        .highlight {
            background: #fef3c7;
            font-weight: 600;
        }
        .best-option {
            background: #d1fae5;
        }
        .current-box {
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js"></script>
</head>
<body>
    <div class="header">
        <h1>Buncha Economics Model</h1>
        <p class="subtitle">Meijer Partnership Pricing Analysis</p>
    </div>

    <div class="controls">
        <h2>Model Variables</h2>
        <div class="control-group">
            <div class="control-item">
                <label for="competitorPrice">Competitor Price ($/order)</label>
                <input type="number" id="competitorPrice" value="12.99" step="0.01" onchange="updateModel()">
            </div>
            <div class="control-item">
                <label for="storeOrders">Average Location Daily Orders</label>
                <input type="number" id="storeOrders" value="110" step="1" onchange="updateModel()">
            </div>
            <div class="control-item">
                <label for="bunchaCapture">% Capture of Location Daily Orders</label>
                <input type="range" id="bunchaCapture" min="30" max="60" value="45" onchange="updateModel()">
                <div class="slider-value"><span id="captureValue">45</span>%</div>
            </div>
            <div class="control-item">
                <label for="rampWeeks">Weeks to Reach 30 Daily Orders</label>
                <input type="range" id="rampWeeks" min="8" max="24" value="16" step="1" onchange="updateModel()">
                <div class="slider-value"><span id="rampValue">16</span> weeks</div>
            </div>
            <div class="control-item">
                <label for="totalLocations">Number of Locations Launched Over 2 Years</label>
                <input type="number" id="totalLocations" value="100" step="10" onchange="updateModel()">
            </div>
        </div>
    </div>

    <div class="dashboard">
        <div class="card current-box">
            <h2>Current (Competitor)</h2>
            <div class="metric">
                <span class="metric-label">Price per Order</span>
                <span class="metric-value current" id="currentPrice">$12.99</span>
            </div>
            <div class="metric">
                <span class="metric-label">Year 1 Cost</span>
                <span class="metric-value" id="currentYear1">-</span>
            </div>
            <div class="metric">
                <span class="metric-label">Year 2 Cost</span>
                <span class="metric-value" id="currentYear2">-</span>
            </div>
            <div class="metric highlight">
                <span class="metric-label">2-Year Total Cost</span>
                <span class="metric-value" id="currentTotal">-</span>
            </div>
        </div>

        <div class="card">
            <h2>Option 1: Strategic Investment</h2>
            <div class="metric">
                <span class="metric-label">Upfront Investment</span>
                <span class="metric-value cost">$5,500,000</span>
            </div>
            <div class="metric">
                <span class="metric-label">Price per Order</span>
                <span class="metric-value option-1">$9.99</span>
            </div>
            <div class="metric">
                <span class="metric-label">Launch Rate</span>
                <span class="metric-value">4 locations/month</span>
            </div>
            <div class="metric">
                <span class="metric-label">Time to Full Coverage</span>
                <span class="metric-value" id="option1Coverage">-</span>
            </div>
            <div class="metric highlight">
                <span class="metric-label">2-Year Savings vs Current</span>
                <span class="metric-value savings" id="option1Savings">-</span>
            </div>
        </div>

        <div class="card">
            <h2>Option 2: Kickstart Guarantee</h2>
            <div class="metric">
                <span class="metric-label">Daily Guarantee</span>
                <span class="metric-value">$450/day (120 days)</span>
            </div>
            <div class="metric">
                <span class="metric-label">After 30 Orders/Day</span>
                <span class="metric-value option-2">$9.99/order</span>
            </div>
            <div class="metric">
                <span class="metric-label">Launch Rate</span>
                <span class="metric-value">2 locations/month</span>
            </div>
            <div class="metric">
                <span class="metric-label">Time to Full Coverage</span>
                <span class="metric-value" id="option2Coverage">-</span>
            </div>
            <div class="metric highlight">
                <span class="metric-label">2-Year Savings vs Current</span>
                <span class="metric-value savings" id="option2Savings">-</span>
            </div>
        </div>

        <div class="card">
            <h2>Option 3: Volume Tiers</h2>
            <div class="metric">
                <span class="metric-label">Tier 1 (0-29 orders)</span>
                <span class="metric-value">$13.99/order</span>
            </div>
            <div class="metric">
                <span class="metric-label">Tier 2 (30-44 orders)</span>
                <span class="metric-value">$12.99/order</span>
            </div>
            <div class="metric">
                <span class="metric-label">Tier 3 (45+ orders)</span>
                <span class="metric-value option-3">$10.99/order</span>
            </div>
            <div class="metric">
                <span class="metric-label">Launch Rate</span>
                <span class="metric-value">1 location/month</span>
            </div>
            <div class="metric highlight">
                <span class="metric-label">2-Year Savings vs Current</span>
                <span class="metric-value" id="option3Savings">-</span>
            </div>
        </div>
    </div>

    <div class="chart-container">
        <h2>Per-Store Monthly Cost Comparison</h2>
        <canvas id="perStoreCostChart"></canvas>
    </div>

    <div class="chart-container">
        <h2>Portfolio Cumulative Cost (Different Launch Rates)</h2>
        <canvas id="costChart"></canvas>
    </div>

    <div class="chart-container">
        <h2>Location Growth Timeline</h2>
        <canvas id="growthChart"></canvas>
    </div>

    <div class="chart-container">
        <h2>Cumulative Monthly Savings vs Current</h2>
        <canvas id="savingsChart"></canvas>
    </div>

    <div class="table-container">
        <h2>Per-Store Monthly Economics (Mature Store at 50 Orders/Day)</h2>
        <table>
            <thead>
                <tr>
                    <th>Option</th>
                    <th>Price/Order</th>
                    <th>Monthly Orders</th>
                    <th>Monthly Cost/Store</th>
                    <th>Annual Cost/Store</th>
                    <th>Savings vs Current</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Current (Competitor)</td>
                    <td id="matureCompetitorPrice">-</td>
                    <td>1,500</td>
                    <td id="matureCompetitorMonthly">-</td>
                    <td id="matureCompetitorAnnual">-</td>
                    <td>-</td>
                </tr>
                <tr class="best-option">
                    <td>Option 1: Strategic</td>
                    <td>$9.99</td>
                    <td>1,500</td>
                    <td id="matureOption1Monthly">$14,985</td>
                    <td id="matureOption1Annual">$179,820</td>
                    <td id="matureOption1Savings">-</td>
                </tr>
                <tr>
                    <td>Option 2: Kickstart</td>
                    <td>$9.99</td>
                    <td>1,500</td>
                    <td id="matureOption2Monthly">$14,985</td>
                    <td id="matureOption2Annual">$179,820</td>
                    <td id="matureOption2Savings">-</td>
                </tr>
                <tr>
                    <td>Option 3: Tiers</td>
                    <td>$10.99</td>
                    <td>1,500</td>
                    <td id="matureOption3Monthly">$16,485</td>
                    <td id="matureOption3Annual">$197,820</td>
                    <td id="matureOption3Savings">-</td>
                </tr>
            </tbody>
        </table>
        <p style="margin-top: 10px; color: #666; font-size: 14px;">
            * Based on 50 daily orders × 30 days = 1,500 monthly orders per store at full ramp
        </p>
    </div>

    <div class="table-container">
        <h2>Portfolio Monthly Breakdown (All Active Locations)</h2>
        <p style="margin-bottom: 10px; color: #666; font-size: 14px;">
            Note: Total costs differ due to launch rates - Option 1 launches 4x faster than Option 3
        </p>
        <table id="monthlyTable">
            <thead>
                <tr>
                    <th>Month</th>
                    <th>Active Locations</th>
                    <th>Avg Orders/Store</th>
                    <th>Current Total</th>
                    <th>Option 1 Total</th>
                    <th>Option 2 Total</th>
                    <th>Option 3 Total</th>
                </tr>
            </thead>
            <tbody id="monthlyTableBody">
            </tbody>
        </table>
    </div>

    <script>
        let costChart, growthChart, savingsChart, perStoreCostChart;

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function calculateOrderRamp(weeksActive, targetOrders, rampWeeks) {
            if (weeksActive >= rampWeeks) return targetOrders;
            // Linear ramp to 30 orders
            return Math.round(30 * (weeksActive / rampWeeks));
        }

        function getOption3Price(orders) {
            if (orders < 30) return 13.99;
            if (orders < 45) return 12.99;
            return 10.99;
        }

        function updateModel() {
            const competitorPrice = parseFloat(document.getElementById('competitorPrice').value);
            const storeOrders = parseInt(document.getElementById('storeOrders').value);
            const bunchaCapture = parseInt(document.getElementById('bunchaCapture').value) / 100;
            const rampWeeks = parseInt(document.getElementById('rampWeeks').value);
            const totalLocations = parseInt(document.getElementById('totalLocations').value);

            // Update slider values
            document.getElementById('captureValue').textContent = Math.round(bunchaCapture * 100);
            document.getElementById('rampValue').textContent = rampWeeks;
            document.getElementById('currentPrice').textContent = `$${competitorPrice}`;

            const targetDailyOrders = Math.round(storeOrders * bunchaCapture);
            const months = 24;
            
            // Launch rates
            const option1LaunchRate = 4; // stores per month
            const option2LaunchRate = 2;
            const option3LaunchRate = 1;

            // Calculate monthly data
            let monthlyData = [];
            let option1Total = 5500000; // Initial investment
            let option2Total = 0;
            let option3Total = 0;
            let currentTotal = 0;

            // Track active stores per option
            let option1Stores = 0;
            let option2Stores = 0;
            let option3Stores = 0;

            for (let month = 1; month <= months; month++) {
                // Add new stores
                option1Stores = Math.min(option1Stores + option1LaunchRate, totalLocations);
                option2Stores = Math.min(option2Stores + option2LaunchRate, totalLocations);
                option3Stores = Math.min(option3Stores + option3LaunchRate, totalLocations);

                // Calculate costs for each option
                let option1MonthCost = 0;
                let option2MonthCost = 0;
                let option3MonthCost = 0;
                let currentMonthCost = 0;

                // Option 1 costs
                for (let store = 1; store <= option1Stores; store++) {
                    const storeAge = month - Math.ceil(store / option1LaunchRate);
                    if (storeAge >= 0) {
                        const weeksActive = storeAge * 4.33;
                        const dailyOrders = calculateOrderRamp(weeksActive, targetDailyOrders, rampWeeks);
                        option1MonthCost += dailyOrders * 30 * 9.99;
                        currentMonthCost += dailyOrders * 30 * competitorPrice;
                    }
                }

                // Option 2 costs
                for (let store = 1; store <= option2Stores; store++) {
                    const storeAge = month - Math.ceil(store / option2LaunchRate);
                    if (storeAge >= 0) {
                        const weeksActive = storeAge * 4.33;
                        const dailyOrders = calculateOrderRamp(weeksActive, targetDailyOrders, rampWeeks);
                        
                        if (storeAge < 4 && dailyOrders < 30) {
                            option2MonthCost += 450 * 30; // Daily guarantee
                        } else {
                            option2MonthCost += dailyOrders * 30 * 9.99;
                        }
                    }
                }

                // Option 3 costs
                for (let store = 1; store <= option3Stores; store++) {
                    const storeAge = month - Math.ceil(store / option3LaunchRate);
                    if (storeAge >= 0) {
                        const weeksActive = storeAge * 4.33;
                        const dailyOrders = calculateOrderRamp(weeksActive, targetDailyOrders, rampWeeks);
                        const price = getOption3Price(dailyOrders);
                        option3MonthCost += dailyOrders * 30 * price;
                    }
                }

                option1Total += option1MonthCost;
                option2Total += option2MonthCost;
                option3Total += option3MonthCost;
                currentTotal += currentMonthCost;

                monthlyData.push({
                    month,
                    option1Stores,
                    option2Stores,
                    option3Stores,
                    option1Cost: option1MonthCost,
                    option2Cost: option2MonthCost,
                    option3Cost: option3MonthCost,
                    currentCost: currentMonthCost,
                    option1Total,
                    option2Total,
                    option3Total,
                    currentTotal,
                    option1Savings: currentTotal - option1Total,
                    option2Savings: currentTotal - option2Total,
                    option3Savings: currentTotal - option3Total
                });
            }

            // Update summary cards
            const year1Data = monthlyData[11];
            const year2Data = monthlyData[23];
            
            document.getElementById('currentYear1').textContent = formatCurrency(year1Data.currentTotal);
            document.getElementById('currentYear2').textContent = formatCurrency(year2Data.currentTotal - year1Data.currentTotal);
            document.getElementById('currentTotal').textContent = formatCurrency(year2Data.currentTotal);

            document.getElementById('option1Coverage').textContent = `${Math.ceil(totalLocations / option1LaunchRate)} months`;
            document.getElementById('option2Coverage').textContent = `${Math.ceil(totalLocations / option2LaunchRate)} months`;

            document.getElementById('option1Savings').textContent = formatCurrency(year2Data.option1Savings);
            document.getElementById('option2Savings').textContent = formatCurrency(year2Data.option2Savings);
            document.getElementById('option3Savings').textContent = formatCurrency(year2Data.option3Savings);

            // Update mature store economics table
            const matureMonthlyOrders = 50 * 30; // 50 daily orders × 30 days
            const competitorMonthly = matureMonthlyOrders * competitorPrice;
            const option1Monthly = matureMonthlyOrders * 9.99;
            const option2Monthly = matureMonthlyOrders * 9.99;
            const option3Monthly = matureMonthlyOrders * 10.99;

            document.getElementById('matureCompetitorPrice').textContent = `${competitorPrice}`;
            document.getElementById('matureCompetitorMonthly').textContent = formatCurrency(competitorMonthly);
            document.getElementById('matureCompetitorAnnual').textContent = formatCurrency(competitorMonthly * 12);
            
            document.getElementById('matureOption1Monthly').textContent = formatCurrency(option1Monthly);
            document.getElementById('matureOption1Annual').textContent = formatCurrency(option1Monthly * 12);
            document.getElementById('matureOption1Savings').textContent = formatCurrency((competitorMonthly - option1Monthly) * 12);
            
            document.getElementById('matureOption2Monthly').textContent = formatCurrency(option2Monthly);
            document.getElementById('matureOption2Annual').textContent = formatCurrency(option2Monthly * 12);
            document.getElementById('matureOption2Savings').textContent = formatCurrency((competitorMonthly - option2Monthly) * 12);
            
            document.getElementById('matureOption3Monthly').textContent = formatCurrency(option3Monthly);
            document.getElementById('matureOption3Annual').textContent = formatCurrency(option3Monthly * 12);
            document.getElementById('matureOption3Savings').textContent = formatCurrency((competitorMonthly - option3Monthly) * 12);

            // Update charts
            updateCharts(monthlyData);
            updateTable(monthlyData.filter((_, i) => i % 3 === 2)); // Show quarterly
        }

        function updateCharts(data) {
            // Per-store cost comparison chart
            const ctx0 = document.getElementById('perStoreCostChart').getContext('2d');
            
            if (perStoreCostChart) perStoreCostChart.destroy();
            
            // Calculate per-store averages
            const perStoreData = data.map(d => ({
                month: d.month,
                current: d.option1Stores > 0 ? d.currentCost / d.option1Stores : 0,
                option1: d.option1Stores > 0 ? d.option1Cost / d.option1Stores : 0,
                option2: d.option2Stores > 0 ? d.option2Cost / d.option2Stores : 0,
                option3: d.option3Stores > 0 ? d.option3Cost / d.option3Stores : 0
            }));
            
            perStoreCostChart = new Chart(ctx0, {
                type: 'line',
                data: {
                    labels: perStoreData.map(d => `Month ${d.month}`),
                    datasets: [
                        {
                            label: 'Current (Competitor)',
                            data: perStoreData.map(d => d.current),
                            borderColor: '#6b7280',
                            borderDash: [5, 5],
                            tension: 0.1
                        },
                        {
                            label: 'Option 1: Strategic ($9.99)',
                            data: perStoreData.map(d => d.option1),
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: 'Option 2: Kickstart',
                            data: perStoreData.map(d => d.option2),
                            borderColor: '#059669',
                            backgroundColor: 'rgba(5, 150, 105, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: 'Option 3: Tiers',
                            data: perStoreData.map(d => d.option3),
                            borderColor: '#dc2626',
                            backgroundColor: 'rgba(220, 38, 38, 0.1)',
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Average Cost Per Store (accounts for ramp period)'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + formatCurrency(context.parsed.y);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });

            // Cost comparison chart
            const ctx1 = document.getElementById('costChart').getContext('2d');
            
            if (costChart) costChart.destroy();
            
            costChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: data.map(d => `Month ${d.month}`),
                    datasets: [
                        {
                            label: 'Current (Competitor)',
                            data: data.map(d => d.currentTotal),
                            borderColor: '#6b7280',
                            borderDash: [5, 5],
                            tension: 0.1
                        },
                        {
                            label: 'Option 1: Strategic Investment',
                            data: data.map(d => d.option1Total),
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: 'Option 2: Kickstart Guarantee',
                            data: data.map(d => d.option2Total),
                            borderColor: '#059669',
                            backgroundColor: 'rgba(5, 150, 105, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: 'Option 3: Volume Tiers',
                            data: data.map(d => d.option3Total),
                            borderColor: '#dc2626',
                            backgroundColor: 'rgba(220, 38, 38, 0.1)',
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Total costs include Option 1\'s $5.5M investment + different launch speeds'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + formatCurrency(context.parsed.y);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });

            // Growth chart
            const ctx2 = document.getElementById('growthChart').getContext('2d');
            
            if (growthChart) growthChart.destroy();
            
            growthChart = new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: data.map(d => `Month ${d.month}`),
                    datasets: [
                        {
                            label: 'Option 1: 4 locations/month',
                            data: data.map(d => d.option1Stores),
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            stepped: true
                        },
                        {
                            label: 'Option 2: 2 locations/month',
                            data: data.map(d => d.option2Stores),
                            borderColor: '#059669',
                            backgroundColor: 'rgba(5, 150, 105, 0.1)',
                            stepped: true
                        },
                        {
                            label: 'Option 3: 1 location/month',
                            data: data.map(d => d.option3Stores),
                            borderColor: '#dc2626',
                            backgroundColor: 'rgba(220, 38, 38, 0.1)',
                            stepped: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Active Locations'
                            }
                        }
                    }
                }
            });

            // Savings chart
            const ctx3 = document.getElementById('savingsChart').getContext('2d');
            
            if (savingsChart) savingsChart.destroy();
            
            savingsChart = new Chart(ctx3, {
                type: 'bar',
                data: {
                    labels: data.map(d => `Month ${d.month}`),
                    datasets: [
                        {
                            label: 'Option 1 Savings',
                            data: data.map(d => d.option1Savings),
                            backgroundColor: '#2563eb'
                        },
                        {
                            label: 'Option 2 Savings',
                            data: data.map(d => d.option2Savings),
                            backgroundColor: '#059669'
                        },
                        {
                            label: 'Option 3 Savings',
                            data: data.map(d => d.option3Savings),
                            backgroundColor: '#dc2626'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Total costs include Option 1\'s $5.5M investment + different launch speeds'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + formatCurrency(context.parsed.y);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateTable(data) {
            const tbody = document.getElementById('monthlyTableBody');
            tbody.innerHTML = '';

            // Get ramp weeks from input
            const rampWeeks = parseInt(document.getElementById('rampWeeks').value);
            const targetDailyOrders = 50; // From the calculation

            data.forEach(row => {
                // Calculate average orders for a store based on how long it's been active
                const monthsActive = row.month;
                const weeksActive = monthsActive * 4.33;
                const avgDailyOrders = calculateOrderRamp(weeksActive, targetDailyOrders, rampWeeks);

                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>Month ${row.month}</td>
                    <td>O1: ${row.option1Stores} | O2: ${row.option2Stores} | O3: ${row.option3Stores}</td>
                    <td>${avgDailyOrders}</td>
                    <td>${formatCurrency(row.currentCost)}</td>
                    <td>${formatCurrency(row.option1Cost)}</td>
                    <td>${formatCurrency(row.option2Cost)}</td>
                    <td>${formatCurrency(row.option3Cost)}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Initialize on load
        updateModel();
    </script>
</body>
</html>
